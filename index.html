<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML to PNG Converter</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    iframe { width: 100%; height: 400px; border: 1px solid #ccc; margin-top: 20px; }
    button { margin-top: 20px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h1>Convert HTML File to PNG</h1>
  <input type="file" id="fileInput" accept=".html" />
  <br />
  <iframe id="previewFrame"></iframe>
  <br />
  <button id="convertBtn">Convert to PNG</button>
  <br />
  <div id="output"></div>

  <script>
    const fileInput = document.getElementById('fileInput');
    const previewFrame = document.getElementById('previewFrame');
    const convertBtn = document.getElementById('convertBtn');
    const outputDiv = document.getElementById('output');

    let loadedHTML = '';

    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type === 'text/html') {
        const reader = new FileReader();
        reader.onload = function(event) {
          loadedHTML = event.target.result;
          const blob = new Blob([loadedHTML], { type: 'text/html' });
          const url = URL.createObjectURL(blob);
          previewFrame.src = url;
        };
        reader.readAsText(file);
      } else {
        alert('Please upload a valid HTML file.');
      }
    });

    convertBtn.addEventListener('click', () => {
      const iframeDoc = previewFrame.contentDocument || previewFrame.contentWindow.document;
      const target = iframeDoc.body;

      html2canvas(target).then(canvas => {
        const img = document.createElement('img');
        img.src = canvas.toDataURL('image/png');
        img.style.maxWidth = '100%';
        outputDiv.innerHTML = '';
        outputDiv.appendChild(img);
      }).catch(error => {
        console.error('Error capturing screenshot:', error);
      });
    });
  </script>
</body>
</html>
